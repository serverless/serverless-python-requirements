service: sls-py-req-test

provider:
  name: aws
  runtime: ${opt:runtime, 'python3.6'}

plugins:
  - serverless-python-requirements
custom:
  pythonRequirements:
    zip: ${opt:zip, self:custom.defaults.zip}
    dockerizePip: ${opt:dockerizePip, self:custom.defaults.dockerizePip}
    slim: ${opt:slim, self:custom.defaults.slim}
    slimPatterns: ${file(./slimPatterns.yml):slimPatterns, self:custom.defaults.slimPatterns}
    slimPatternsAppendDefaults: ${opt:slimPatternsAppendDefaults, self:custom.defaults.slimPatternsAppendDefaults}
    vendor: ${opt:vendor, ''}
    fileName: ${opt:fileName, 'requirements.txt'}
    IndividuallyMoveUpModules: ${opt:moveup, self:custom.defaults.IndividuallyMoveUpModules}
    useStaticCache: ${opt:useStaticCache, self:custom.defaults.useStaticCache}
    useDownloadCache: ${opt:useDownloadCache, self:custom.defaults.useDownloadCache}
    cacheLocation: ${opt:cacheLocation, ''}
  defaults:
    slim: false
    slimPatterns: false
    slimPatternsAppendDefaults: true
    zip: false
    dockerizePip: false
    individually: false
    IndividuallyMoveUpModules: true
    useStaticCache: false
    useDownloadCache: false

package:
  individually: ${opt:individually, self:custom.defaults.individually}
  exclude:
    - '**/*'
  include:
    - 'handler.py'

functions:
  hello:
    handler: handler.hello
  hello3:
    handler: handler.hello
    runtime: nodejs6.10
  hello4:
    handler: fn2_handler.hello
    module: fn2
    package:
      include:
        - 'fn2/**'
  hello2:
    handler: handler.hello
  hello5:
    handler: fn2.handler.hello2
    module: fn2
    package:
      include:
        - 'fn2/**'
        - 'common/__init__.py'
  hello6:
    handler: fn3.fn3_handler.hello
    module: fn3
    package:
      include:
        - 'fn3/**'
        - 'common/__init__.py'
